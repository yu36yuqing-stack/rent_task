<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Rent Task H5</title>
  <link rel="stylesheet" href="/css/app.css">
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <div id="heroLoginView">
        <h1>Rent Task 控制台</h1>
        <div class="sub">移动端 · 内部体验版本</div>
      </div>
      <div id="heroAppView" class="hero-toolbar hidden">
        <button id="menuTrigger" class="hero-menu-trigger" aria-label="打开菜单">☰</button>
        <h1 id="heroMenuTitle" class="hero-menu-title">商品列表</h1>
      </div>
    </section>

    <section id="loginView" class="panel login-panel">
      <div class="field">
        <label for="account">账号</label>
        <input id="account" autocomplete="username" placeholder="请输入用户名">
      </div>
      <div class="field">
        <label for="password">密码</label>
        <input id="password" type="password" autocomplete="current-password" placeholder="请输入密码">
      </div>
      <div class="remember-row">
        <label class="remember-label" for="rememberLogin">
          <input id="rememberLogin" type="checkbox" checked>
          记住登录（短期）
        </label>
      </div>
      <button id="btnLogin" class="btn btn-primary">登录</button>
      <div id="loginErr" class="error"></div>
    </section>

    <section id="listView" class="hidden">
      <div id="pullRefresh" class="pull-refresh hidden">
        <div id="pullRefreshInner" class="pull-refresh-inner">
          <span class="pull-spinner"></span>
          <span>加载中...</span>
        </div>
      </div>

      <div id="filters" class="filters"></div>
      <p id="orderTotal" class="order-total"></p>
      <div id="listContainer"></div>

      <div class="pager">
        <button id="prevPage" class="btn btn-ghost">上一页</button>
        <span id="pageInfo" class="page-info"></span>
        <button id="nextPage" class="btn btn-ghost">下一页</button>
      </div>
    </section>

    <section id="orderView" class="hidden orders-view">
      <div class="orders-tabs-row">
        <div id="orderStatusTabs" class="orders-tabs"></div>
        <button id="orderSyncNowBtn" class="btn btn-ghost">同步订单</button>
      </div>
      <div id="orderQuickFilters" class="orders-quick"></div>
      <p id="orderGameHint" class="orders-game-hint"></p>
      <div id="orderListContainer"></div>
      <div class="pager">
        <button id="orderPrevPage" class="btn btn-ghost">上一页</button>
        <span id="orderPageInfo" class="page-info"></span>
        <button id="orderNextPage" class="btn btn-ghost">下一页</button>
      </div>
    </section>

    <section id="statsView" class="hidden stats-view">
      <div id="statsPeriods" class="stats-periods"></div>
      <div class="stats-head-row">
        <p id="statsRangeText" class="stats-title">统计区间：-</p>
        <button id="statsRefreshBtn" class="btn btn-ghost">手动刷新</button>
      </div>
      <div id="statsKpiGrid" class="stats-kpi-grid"></div>
      <div id="statsCalCard" class="stats-cal-card">
        <div class="stats-cal-head">
          <p id="statsCalTitle" class="stats-title">收入日历（元）/合计：¥0.00</p>
          <input id="statsCalMonth" class="stats-cal-month" type="month">
        </div>
        <div class="stats-cal-week">
          <span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>
        </div>
        <div id="statsCalGrid" class="stats-cal-grid"></div>
      </div>
      <div class="stats-head-row">
        <p id="statsAccountTitle" class="stats-title">账号收益</p>
      </div>
      <div id="statsAccountList" class="stats-acc-list"></div>
    </section>

    <div id="drawerMask" class="drawer-mask hidden"></div>
    <aside id="sideDrawer" class="side-drawer hidden" aria-hidden="true">
      <div class="drawer-user">
        <div class="drawer-user-head">
          <p id="drawerUserName" class="drawer-user-name">当前用户：-</p>
          <button id="btnLogout" class="drawer-logout-btn">退出</button>
        </div>
        <div class="drawer-user-rule-row">
          <p id="drawerOrderOffThreshold" class="drawer-user-rule-text">X单下架阈值：3</p>
          <button id="btnSetOrderOffThreshold" class="drawer-rule-btn">设置</button>
        </div>
      </div>
      <div class="drawer-list">
        <button class="drawer-item" data-menu="products" data-label="商品列表">商品列表</button>
        <button class="drawer-item" data-menu="orders" data-label="订单列表">订单列表</button>
        <button class="drawer-item" data-menu="stats" data-label="统计看板">统计看板</button>
        <button class="drawer-item" data-menu="auth" data-label="授权管理（开发中）">授权管理（开发中）</button>
      </div>
    </aside>
  </div>

  <div id="reasonOverlay" class="overlay hidden">
    <div class="overlay-card">
      <div class="overlay-head">
        <span>限制原因</span>
        <button id="overlayClose" class="overlay-close">×</button>
      </div>
      <div id="overlayBody" class="overlay-body"></div>
    </div>
  </div>

  <div id="forbiddenSheet" class="sheet hidden">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title-wrap">
          <span class="sheet-icon">禁</span>
          <div id="forbiddenSheetTitle" class="sheet-title">处理禁玩</div>
        </div>
        <div id="forbiddenSheetResult" class="sheet-result"></div>
      </div>
      <div class="sheet-actions">
        <button id="sheetEnableForbidden" class="sheet-btn warn">开启禁玩</button>
        <button id="sheetDisableForbidden" class="sheet-btn">解除禁玩</button>
        <button id="sheetCancelForbidden" class="sheet-btn">关闭弹窗</button>
      </div>
    </div>
  </div>

  <div id="moreOpsSheet" class="sheet hidden">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title-wrap">
          <span class="sheet-icon">⋯</span>
          <div id="moreOpsSheetTitle" class="sheet-title">更多操作</div>
        </div>
      </div>
      <div class="sheet-actions">
        <button id="moreOpsForbiddenBtn" class="sheet-btn warn">处理禁玩</button>
        <button id="moreOpsPurchaseBtn" class="sheet-btn">维护采购</button>
        <button id="moreOpsCloseBtn" class="sheet-btn">关闭弹窗</button>
      </div>
    </div>
  </div>

  <div id="purchaseSheet" class="sheet hidden">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title-wrap">
          <span class="sheet-icon">采</span>
          <div id="purchaseSheetTitle" class="sheet-title">维护采购信息</div>
        </div>
        <div id="purchaseSheetResult" class="sheet-result"></div>
      </div>
      <div class="field" style="margin-top:0;">
        <label for="purchasePriceInput">采购价格</label>
        <input id="purchasePriceInput" type="number" step="0.01" min="0" inputmode="decimal" placeholder="例如 1888.88">
      </div>
      <div class="field">
        <label for="purchaseDateInput">采购日期</label>
        <input id="purchaseDateInput" type="date">
      </div>
      <div class="sheet-actions">
        <button id="purchaseSaveBtn" class="sheet-btn">保存</button>
        <button id="purchaseCancelBtn" class="sheet-btn">关闭弹窗</button>
      </div>
    </div>
  </div>

  <div id="orderOffThresholdSheet" class="sheet hidden">
    <div class="sheet-card">
      <div class="sheet-head">
        <div class="sheet-title-wrap">
          <span class="sheet-icon">阈</span>
          <div class="sheet-title">设置下架阈值</div>
        </div>
        <div id="orderOffThresholdSheetResult" class="sheet-result"></div>
      </div>
      <div class="field" style="margin-top:0;">
        <label for="orderOffThresholdInput">X单下架阈值（1~10）</label>
        <input id="orderOffThresholdInput" type="number" step="1" min="1" max="10" inputmode="numeric" placeholder="请输入 1~10">
      </div>
      <div class="sheet-actions">
        <button id="orderOffThresholdSaveBtn" class="sheet-btn">保存</button>
        <button id="orderOffThresholdCancelBtn" class="sheet-btn">关闭弹窗</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <div id="statsMissingOverlay" class="stats-missing-overlay hidden">
    <div class="stats-missing-card">
      <p class="stats-missing-title">以下账号未配置采购信息</p>
      <p class="stats-missing-desc">统计报表仅展示已配置采购价格和采购日期的账号。请先补全配置。</p>
      <ul id="statsMissingList" class="stats-missing-list"></ul>
      <div style="display:flex;justify-content:flex-end;">
        <button id="statsMissingClose" class="btn btn-ghost">我知道了</button>
      </div>
    </div>
  </div>
  <div id="globalLoading" class="global-loading hidden" aria-live="polite" aria-busy="true">
    <div class="global-loading-card">
      <span class="global-loading-spinner"></span>
      <span>加载中...</span>
    </div>
  </div>
  <script defer src="/js/app_core.js"></script>
  <script defer src="/js/menu_products.js"></script>
  <script defer src="/js/menu_orders.js"></script>
  <script defer src="/js/menu_stats.js"></script>
</body>
</html>
